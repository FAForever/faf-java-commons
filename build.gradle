buildscript {
  repositories {
    mavenCentral()
  }

  dependencies {
    classpath("org.kt3k.gradle.plugin:coveralls-gradle-plugin:2.8.3")
  }
}

subprojects {

  apply plugin: 'maven-publish'
  apply plugin: 'java-library'
  apply plugin: 'com.github.kt3k.coveralls'

  group = 'com.faforever.commons'
  version = '1.0-SNAPSHOT'

  sourceCompatibility = JavaVersion.VERSION_11
  targetCompatibility = JavaVersion.VERSION_11

  repositories {
    mavenCentral()
    jcenter()
  }

  publishing {
    publications {
      maven(MavenPublication) {
        from components.java
      }
    }
  }

  dependencies {
    annotationProcessor("org.projectlombok:lombok:${lombokVersion}")
    compileOnly("org.projectlombok:lombok:${lombokVersion}")
    compileOnly("org.jetbrains:annotations:${jetbrainsAnnotationsVersion}")
    compileOnly("com.fasterxml.jackson.core:jackson-databind:${jacksonVersion}")
    annotationProcessor("org.slf4j:slf4j-api:${slf4jVersion}")
    compileOnly("org.slf4j:slf4j-api:${slf4jVersion}")

    testAnnotationProcessor("org.projectlombok:lombok:${lombokVersion}")
    testCompileOnly("org.projectlombok:lombok:${lombokVersion}")
    testCompileOnly("org.jetbrains:annotations:${jetbrainsAnnotationsVersion}")

    testImplementation("org.skyscreamer:jsonassert:1.5.0")
    testImplementation("org.junit.jupiter:junit-jupiter-api:${junitVersion}")
    testImplementation("org.hamcrest:hamcrest-core:${hamcrestVersion}")
    testRuntimeOnly("org.junit.jupiter:junit-jupiter-engine:${junitVersion}")
    testImplementation("org.mockito:mockito-core:${mockitoVersion}")
    testImplementation("org.mockito:mockito-junit-jupiter:${mockitoVersion}")
  }

  test {
    useJUnitPlatform()
  }

}
